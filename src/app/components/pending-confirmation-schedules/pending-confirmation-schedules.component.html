<div class="container" style="margin-top: 80px;" *ngIf="cronogramas?.length && isLoaded">
  <div class="row">
    <mat-card *ngFor="let cronograma of cronogramas" class="col-12 col-md-10 offset-md-1" style="margin-top: 20px;"> 
      <mat-card-header>
        <div mat-card-avatar class="avatar" style="margin-top: 5px;"><!--{{inicialesNombreAlumno(cronograma.nombreAlumno)}}-->{{cronograma.idCronograma}}</div>
        <mat-card-title><span style="margin-right: 10px; font-weight: 500; font-size: 16px;">{{ cronograma.nombreAlumno | capitalize}}</span> <span class="spanLink" style="margin-left: 3px;" (click)="sendWsp(cronograma.telefonoAlumno);" title="Enviar Whatsapp">{{cronograma.telefonoAlumno | phone}}<i style="margin-left: 7px; color: #43c89d;" class="fab fa-whatsapp"></i></span></mat-card-title>
        <mat-card-subtitle>
          <div id="direccionPrincipal">
            <span></span><span style="font-weight: 500;">{{cronograma.direccionPrincipalFormateada}}</span>
          </div>
          <div *ngIf="cronograma.direccionAlternativaFormateada != null" id="direccionPrincipal">
            <span>Dirección alternativa: </span><span style="font-weight: 500;">{{cronograma.direccionAlternativaFormateada}}</span>
          </div>
        </mat-card-subtitle>
      </mat-card-header>
      <mat-card-content style="overflow-y: auto; max-height: 350px;">
        <label id="totalClases" style="font-size: 12px; color: rgba(0,0,0,.54); font-weight: 500; margin-bottom: 0px;">Total de clases: {{cronograma.clases.length}}</label>
        <table mat-table [dataSource]="cronograma.clases" style="width: 100%;" class="mat-elevation-z0">
        
          <!-- No.Clase Column -->
          <ng-container matColumnDef="noClase">
            <th mat-header-cell *matHeaderCellDef> No. </th>
            <td mat-cell *matCellDef="let element; let i = index"> {{i + 1}} </td>
          </ng-container>

          <!-- Fecha Column -->
          <ng-container matColumnDef="fecha">
            <th mat-header-cell *matHeaderCellDef> Fecha </th>
            <td mat-cell *matCellDef="let element"> {{element.fecha | date:'mediumDate'}} </td>
          </ng-container>
        
          <!-- Hora Column -->
          <ng-container matColumnDef="hora">
            <th mat-header-cell *matHeaderCellDef> Hora </th>
            <td mat-cell *matCellDef="let element"> {{element.horaInicio}} </td>
          </ng-container>
        
          <!-- Direccion Column -->
          <ng-container matColumnDef="direccion">
            <th mat-header-cell *matHeaderCellDef> Dirección </th>
            <td mat-cell *matCellDef="let element"> {{element.direccionClaseFormateada}} </td>
          </ng-container>
        
          <!-- auto Column -->
          <ng-container matColumnDef="auto">
            <th mat-header-cell *matHeaderCellDef> Auto </th>
            <td mat-cell *matCellDef="let element">{{element.auto == 4 ? 'AT' : element.auto}} </td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        </table>
      </mat-card-content>

      <mat-card-actions align="end">
        <button mat-button class="deleteButton" (click)="onCancelSchedule(cronograma.idCronograma, cronograma.nombreAlumno, cronograma.alumno);">ELIMINAR</button>
        <div fxFlex></div>
        <button mat-button class="confirmButton" (click)="onConfirmSchedule(cronograma.clases, cronograma.idCronograma, cronograma.nombreAlumno, cronograma.alumno, cronograma.idDireccionPrincipal, cronograma.idDireccionAlternativa, cronograma.direccionPrincipalFormateada, cronograma.direccionAlternativaFormateada);">CONFIRMAR</button>
      </mat-card-actions>
    </mat-card>
  </div>
</div>

<div class="container" style="margin-top: 80px; height: 100%;" *ngIf="!cronogramas.length && isLoaded">
  <div class="row" style="height: 100%;">
    <div id="resultsContainer" style="height: 40%; width: 100%; margin-top: 70px;">
      <div id="imageContainer">
        <img src="assets/img/noResultsSchedules.png" alt="No hay resultados" height="250" width="250">
      </div>
      <div id="emptyMessageContainer">
        <span>No hay cronogramas pendientes por confirmar</span>
      </div>
    </div>
  </div>
</div>

<custom-modal #customModal (close)="onCustomModalClose($event);" (confirmation)="confirmSchedule($event);" [data]="dataToConfirm" [component]="'pendingConfirmationSchedules'" [successBanner]="showSuccessBanner" [operation]="operation"></custom-modal>